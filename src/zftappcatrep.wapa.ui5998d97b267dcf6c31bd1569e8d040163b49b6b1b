sap.ui.define([                                                                                                                                                                                                                                                
    "sap/ui/core/UIComponent",                                                                                                                                                                                                                                 
    "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                             
    "sap/f/FlexibleColumnLayoutSemanticHelper"                                                                                                                                                                                                                 
], function (UIComponent, JSONModel, FlexibleColumnLayoutSemanticHelper) {                                                                                                                                                                                     
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    return UIComponent.extend("nype.ft.ac.Component", {                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
        metadata: {                                                                                                                                                                                                                                            
            manifest: "json"                                                                                                                                                                                                                                   
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.                                                                                                                                     
         * @public                                                                                                                                                                                                                                             
         * @override                                                                                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        init: function () {                                                                                                                                                                                                                                    
            this._createModels();                                                                                                                                                                                                                              
            this._attachMetadataFailedDialog();                                                                                                                                                                                                                
            // call the base component's init function and create the App view                                                                                                                                                                                 
            UIComponent.prototype.init.apply(this, arguments);                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            this.getRouter().initialize();                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Set application layout                                                                                                                                                                                                                              
         * @public                                                                                                                                                                                                                                             
         * @override                                                                                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        setApplicationLayout: function (iLevel) {                                                                                                                                                                                                              
            var oNextUIState = this._getHelper().getNextUIState(iLevel);                                                                                                                                                                                       
            this.getModel("app").setProperty("/layout", oNextUIState.layout);                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Getter for the text from i18n bundle.                                                                                                                                                                                                               
         * @public                                                                                                                                                                                                                                             
         * @param {string} [sName] the text name                                                                                                                                                                                                               
         * @param {array} [aArguments] the arguments for text                                                                                                                                                                                                  
         * @returns {string} the formatted text from i18n bundle                                                                                                                                                                                               
         */                                                                                                                                                                                                                                                    
        getText: function (sName, aArguments) {                                                                                                                                                                                                                
            return this.getModel("i18n").getResourceBundle().getText(sName, aArguments);                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Returns an instance of the semantic helper                                                                                                                                                                                                          
         * @returns {sap.f.FlexibleColumnLayoutSemanticHelper} An instance of the semantic helper                                                                                                                                                              
         */                                                                                                                                                                                                                                                    
        _getHelper: function () {                                                                                                                                                                                                                              
            var oFCL = this.getRootControl().byId("fcl");                                                                                                                                                                                                      
            var oSettings = {                                                                                                                                                                                                                                  
                defaultTwoColumnLayoutType: sap.f.LayoutType.TwoColumnsMidExpanded,                                                                                                                                                                            
                defaultThreeColumnLayoutType: sap.f.LayoutType.ThreeColumnsEndExpanded,                                                                                                                                                                        
                initialColumnsCount: 1                                                                                                                                                                                                                         
            };                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            return FlexibleColumnLayoutSemanticHelper.getInstanceFor(oFCL, oSettings);                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _createModels: function () {                                                                                                                                                                                                                           
            this.setModel(new JSONModel({                                                                                                                                                                                                                      
                layout: null,                                                                                                                                                                                                                                  
                systems: {}                                                                                                                                                                                                                                    
            }), "app");                                                                                                                                                                                                                                        
            this.setModel(new JSONModel({                                                                                                                                                                                                                      
                title: "",                                                                                                                                                                                                                                     
                text: ""                                                                                                                                                                                                                                       
            }), "errorDialog");                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _attachMetadataFailedDialog: function () {                                                                                                                                                                                                             
            this.getModel().attachMetadataFailed(function () {                                                                                                                                                                                                 
                var oModel = this.getModel("errorDialog");                                                                                                                                                                                                     
                var oMetadata = this.getMetadata();                                                                                                                                                                                                            
                var sDataSource = oMetadata.getManifestEntry("sap.ui5").models[""].dataSource;                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                var sTitle = this.getText("component.metadata.error.title", [sDataSource]);                                                                                                                                                                    
                var sText = this.getText("component.metadata.error.text", [sDataSource]);                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                oModel.setProperty("/title", sTitle);                                                                                                                                                                                                          
                oModel.setProperty("/text", sText);                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                this._getErrorDialog().open();                                                                                                                                                                                                                 
            }.bind(this));                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _getErrorDialog: function () {                                                                                                                                                                                                                         
            if (!this._oErrorDialog) {                                                                                                                                                                                                                         
                var oDialog = sap.ui.xmlfragment("nype.ft.ac.view.fragments.ErrorDialog");                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                oDialog.setModel(this.getModel("i18n"), "i18n");                                                                                                                                                                                               
                oDialog.setModel(this.getModel("errorDialog"), "errorDialog");                                                                                                                                                                                 
                oDialog.getEndButton().attachPress(function () {                                                                                                                                                                                               
                    oDialog.close();                                                                                                                                                                                                                           
                });                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                this._oErrorDialog = oDialog;                                                                                                                                                                                                                  
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            return this._oErrorDialog;                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
    });                                                                                                                                                                                                                                                        
});                                                                                                                                                                                                                                                            